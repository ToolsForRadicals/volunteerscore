{% extends "base.html" %}
{% block content %}

<script type="text/javascript">
var i = 1;
var synctime = 100 / {{ peoplecount }}

var counterBack = setInterval(function(){
  i = i + synctime
  if (i < 100){
    $("div.progress-bar").css('width', i+'%');
  } else {
    $("div.progress").fadeOut(100).collapse('toggle');
    $("div.alert").delay(200).collapse('toggle');
    clearInterval(counterBack);
  }

}, 1000);
</script>

<div class="col-sm-12">
<h4>Now syncing your NationBuilder contacts</h4>
<br>
<p>We're now syncing your {{ peoplecount }} contacts. This will take about {{ peoplecount }} seconds.</p>
<p>You'll receive a notification below when your contacts have finished syncing</p>
<div class="progress collapse in">
  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 1%">
    <span class="sr-only"></span>
  </div>
</div>
<div class="alert alert-success collapse" role="alert">
  Sync completed.
  {% for person in peoplelist %}
    {{ person['full_name']  }}
    <br>
  {% endfor %}

</div>
</div>
{% endblock %}
